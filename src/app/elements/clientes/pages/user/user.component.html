<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="shortcut icon"
      href="../img/cup-hot-fill.svg"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <title>Produtos</title>
    <style>
      body {
        height: 100vh;
      }
      .main-container {
        width: 80%;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <main style="min-width: 372px">
      <div class="main-container">
        <nav class="navbar bg-body-tertiary">
          <div class="container-fluid">
              <a class="navbar-brand" href="#">Kilo Byte</a>

              <div *ngIf="!isAuthenticated()" class="d-flex">
                  <a
                      (click)="navigateLogin()"
                      class="icon-link icon-link-hover d-flex align-items-center me-3"
                      style="cursor: pointer;"
                  >
                      Login
                      <i class="bi bi-arrow-right-circle-fill"></i>
                  </a>
                  <a
                      (click)="navigateSingUp()"
                      class="icon-link icon-link-hover d-flex align-items-center"
                      style="cursor: pointer;"
                  >
                      Cadastre-se
                      <i class="bi bi-arrow-right-circle-fill"></i>
                  </a>
              </div>

              <div *ngIf="isAuthenticated()" class="d-flex align-items-center">
                  <span class="me-4">Bem-vindo, {{ name }}</span>
                  <a
                      (click)="editProfile()"
                      class="icon-link icon-link-hover d-flex align-items-center me-4"
                      style="cursor: pointer;"
                  >
                      Editar Perfil
                  </a>
                  <a
                      (click)="logout()"
                      class="icon-link icon-link-hover d-flex align-items-center me-4"
                      style="cursor: pointer;"
                  >
                      Logout
                      <i class="bi bi-box-arrow-right ms-1"></i>
                  </a>
                  <a
                      class="icon-link icon-link-hover d-flex align-items-center me-4"
                      style="cursor: pointer;"
                      (click)="navigateToOrders()"
                  >
                      Meus Pedidos
                  </a>
              </div>

              <a (click)="carrinho()" class="position-relative" style="cursor: pointer;">
                  <i class="bi bi-cart4 text-secondary h4"></i>
                  <span
                      id="cart-badge"
                      class="badge bg-warning rounded-circle position-absolute top-0 start-100 translate-middle"
                  >
                      {{ cartItemCount }}
                  </span>
              </a>
          </div>
      </nav>

        <main class="mt-4">
          <div class="container">
            <hr class="mt-3" />
            <div class="row">
              <div
                class="col-x1-2 col-lg-3 col-md-4 col-sm-6 d-flex align-items-stretch"
                *ngFor="let product of products"
              >
                <div class="card text-center" style="width: 18rem">
                  <div class="card-header">
                    <h5 class="card-title">{{ product.nome }}</h5>
                  </div>
                  <div class="card-body">
                    <img
                      [src]="product.imagemUrl"
                      class="card-img-top"
                      alt="produto"
                    />
                  </div>
                  <div class="card-footer">
                    <div
                      class="col-12 d-flex justify-content-between align-items-center"
                    >
                      <p class="text-success">
                        {{ product.preco | currency : "BRL" }}
                      </p>
                      <a
                        (click)="navigateProductDetail(product.id)"
                        class="btn btn-outline-dark"
                        >Detalhes</a
                      >
                      <a
                        (click)="addToCart(product)"
                        class="btn btn-primary add-to-cart"
                        >Carrinho</a
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
      <script
        src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"
      ></script>
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"
      ></script>
    </main>
  </body>
</html>
